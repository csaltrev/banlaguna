"use strict";document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector("#transactions-section"),e=document.querySelector("#bulk-modal"),n=document.querySelector("#single-modal"),o=document.querySelector("#accounts-modal"),a=document.querySelector("#user-modal"),r=document.querySelector("#new-account-modal"),c=document.querySelector("#reset-modal"),d=document.querySelector("#user-modal table tbody"),u=document.querySelector("#user-modal p"),s=document.querySelector("#password-modal"),i=document.querySelector("#password-modal p"),l=document.querySelector("#password-modal #user-id"),m=function(t){t.forEach(function(t){var e=document.createElement("tr"),n=document.createElement("th"),o=document.createElement("td"),a=document.createElement("td"),r=document.createElement("td"),c=document.createElement("td"),u=document.createElement("td");n.textContent=t.id,o.textContent=t.sender,a.textContent=t.receiver,r.textContent=t.concept,c.textContent=t.timestamp,u.textContent=t.quantity,e.appendChild(n),e.appendChild(o),e.appendChild(a),e.appendChild(r),e.appendChild(c),e.appendChild(u),d.appendChild(e)})},p=function(t){t.classList.add("is-active"),t.addEventListener("click",function(e){"cancel-btn"!==e.target.id&&"close-btn"!==e.target.id||(t.classList.remove("is-active"),"user-modal"===t.id&&(d.innerHTML="",u.textContent="Usuario"))})};t.addEventListener("click",function(t){if(t.target.id.startsWith("user-")){var d=t.target.id.substr(5);fetch("/admin/user/"+d).then(function(t){return t.json()}).then(function(e){u.textContent=t.target.textContent,p(a),m(e)})}switch(t.target.id){case"bulk-btn":p(e),t.stopPropagation();break;case"single-btn":p(n),t.stopPropagation();break;case"accounts-btn":p(o),o.addEventListener("click",function(t){if("create-btn"===t.target.id)p(r);else if(t.target.id.startsWith("change-pass-")){var e=t.target.id.substr(12);l.value=e,i.textContent=t.target.parentNode.querySelectorAll("td")[1].textContent,p(s)}}),t.stopPropagation();break;case"export-btn":for(var b=[],h=document.querySelectorAll("#acc-bal-table tbody td"),g=0;g<h.length-1;g+=2){var C=[];C.push(h[g].textContent),C.push(h[g+1].textContent.replace(/\,/g,"")),b.push(C)}var v="data:text/csv;charset=utf-8,";b.forEach(function(t){var e=t.join(",");v+=e+"\r\n"});var f=encodeURI(v),y=document.createElement("a");y.setAttribute("href",f);var q=new Date,x=q.getDate(),E=q.getMonth()+1,S=q.getFullYear();x<10&&(x="0"+x),E<10&&(E="0"+E),q=E+"/"+x+"/"+S,y.setAttribute("download","Cuentas-"+q+".csv"),document.body.appendChild(y),y.click(),t.stopPropagation();break;case"reset-btn":p(c),t.stopPropagation();break;default:t.stopPropagation()}})});
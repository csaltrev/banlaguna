"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#transactions-section"),t=document.querySelector("#bulk-modal"),n=document.querySelector("#single-modal"),o=document.querySelector("#accounts-modal"),a=document.querySelector("#user-modal"),r=document.querySelector("#new-account-modal"),c=document.querySelector("#reset-modal"),d=document.querySelector("#user-modal table tbody"),u=document.querySelector("#user-modal p"),l=document.querySelector("#password-modal"),s=document.querySelector("#password-modal p"),i=document.querySelector("#password-modal #user-id"),m=function(e){e.forEach(function(e){var t=document.createElement("tr"),n=document.createElement("th"),o=document.createElement("td"),a=document.createElement("td"),r=document.createElement("td"),c=document.createElement("td"),u=document.createElement("td");n.textContent=e.id,o.textContent=e.sender,a.textContent=e.receiver,r.textContent=e.concept,c.textContent=e.timestamp,u.textContent=e.quantity,t.appendChild(n),t.appendChild(o),t.appendChild(a),t.appendChild(r),t.appendChild(c),t.appendChild(u),d.appendChild(t)})},p=function(e){e.classList.add("is-active"),e.addEventListener("click",function(t){"cancel-btn"!==t.target.id&&"close-btn"!==t.target.id||(e.classList.remove("is-active"),"user-modal"===e.id&&(d.innerHTML="",u.textContent="Usuario"))})};e.addEventListener("click",function(e){if(e.target.id.startsWith("user-")){var d=e.target.id.substr(5);fetch("/admin/user/"+d).then(function(e){return e.json()}).then(function(t){u.textContent=e.target.textContent,p(a),m(t)})}switch(e.target.id){case"bulk-btn":p(t),e.stopPropagation();break;case"single-btn":p(n),e.stopPropagation();break;case"accounts-btn":p(o),o.addEventListener("click",function(e){if("create-btn"===e.target.id)p(r);else if("change-pass"===e.target.id){var t=e.target.parentNode.parentNode.querySelectorAll("td")[0].textContent;s.textContent=e.target.parentNode.querySelectorAll("td")[1].textContent,p(l),i.value=t}}),e.stopPropagation();break;case"export-btn":for(var b=[],g=document.querySelectorAll("#acc-bal-table tbody td"),h=0;h<g.length-1;h+=2){var C=[];C.push(g[h].textContent),C.push(g[h+1].textContent.replace(/\,/g,"")),b.push(C)}var v="data:text/csv;charset=utf-8,";b.forEach(function(e){var t=e.join(",");v+=t+"\r\n"});var f=encodeURI(v),y=document.createElement("a");y.setAttribute("href",f);var q=new Date,x=q.getDate(),S=q.getMonth()+1,E=q.getFullYear();x<10&&(x="0"+x),S<10&&(S="0"+S),q=S+"/"+x+"/"+E,y.setAttribute("download","Cuentas-"+q+".csv"),document.body.appendChild(y),y.click(),e.stopPropagation();break;case"reset-btn":p(c),e.stopPropagation();break;default:e.stopPropagation()}})});
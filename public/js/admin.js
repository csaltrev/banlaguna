"use strict";document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector("#transactions-section"),e=document.querySelector("#bulk-modal"),n=document.querySelector("#single-modal"),o=document.querySelector("#accounts-modal"),a=document.querySelector("#user-modal"),r=document.querySelector("#new-account-modal"),c=document.querySelector("#reset-modal"),d=document.querySelector("#user-modal table tbody"),u=document.querySelector("#user-modal p"),i=function(t){t.forEach(function(t){var e=document.createElement("tr"),n=document.createElement("th"),o=document.createElement("td"),a=document.createElement("td"),r=document.createElement("td"),c=document.createElement("td"),u=document.createElement("td");n.textContent=t.id,o.textContent=t.sender,a.textContent=t.receiver,r.textContent=t.concept,c.textContent=t.timestamp,u.textContent=t.quantity,e.appendChild(n),e.appendChild(o),e.appendChild(a),e.appendChild(r),e.appendChild(c),e.appendChild(u),d.appendChild(e)})},s=function(t){t.classList.add("is-active"),t.addEventListener("click",function(e){"cancel-btn"!==e.target.id&&"close-btn"!==e.target.id||(t.classList.remove("is-active"),"user-modal"===t.id&&(d.innerHTML="",u.textContent="Usuario"))})};t.addEventListener("click",function(t){if(t.target.id.startsWith("user-")){var d=t.target.id.substr(5);fetch("/admin/user/"+d).then(function(t){return t.json()}).then(function(e){u.textContent=t.target.textContent,s(a),i(e)})}switch(t.target.id){case"bulk-btn":s(e),t.stopPropagation();break;case"single-btn":s(n),t.stopPropagation();break;case"accounts-btn":s(o),o.addEventListener("click",function(t){"create-btn"===t.target.id&&s(r)}),t.stopPropagation();break;case"export-btn":for(var l=[],m=document.querySelectorAll("tbody td"),p=0;p<m.length-2;p++){var h=[];h.push(m[p].textContent),h.push(m[p+1].textContent),h.push(m[p+2].textContent),l.push(h)}var b="data:text/csv;charset=utf-8,";l.forEach(function(t){var e=t.join(",");b+=e+"\r\n"});var C=encodeURI(b),g=document.createElement("a");g.setAttribute("href",C);var v=new Date,f=v.getDate(),x=v.getMonth()+1,y=v.getFullYear();f<10&&(f="0"+f),x<10&&(x="0"+x),v=x+"/"+f+"/"+y,g.setAttribute("download","Cuentas-"+v+".csv"),document.body.appendChild(g),g.click(),t.stopPropagation();break;case"reset-btn":s(c),t.stopPropagation();break;default:t.stopPropagation()}})});
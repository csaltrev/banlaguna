"use strict";document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector("#transactions-section"),e=document.querySelector("#bulk-modal"),n=document.querySelector("#single-modal"),a=document.querySelector("#accounts-modal"),o=document.querySelector("#user-modal"),c=document.querySelector("#new-account-modal"),r=document.querySelector("#reset-modal"),d=document.querySelector("#user-modal table tbody"),u=document.querySelector("#user-modal p"),i=function(t){t.forEach(function(t){var e=document.createElement("tr"),n=document.createElement("th"),a=document.createElement("td"),o=document.createElement("td"),c=document.createElement("td"),r=document.createElement("td"),u=document.createElement("td");n.textContent=t.id,a.textContent=t.sender,o.textContent=t.receiver,c.textContent=t.concept,r.textContent=t.timestamp,u.textContent=t.quantity,e.appendChild(n),e.appendChild(a),e.appendChild(o),e.appendChild(c),e.appendChild(r),e.appendChild(u),d.appendChild(e)})},s=function(t){t.classList.add("is-active"),t.addEventListener("click",function(e){"cancel-btn"!==e.target.id&&"close-btn"!==e.target.id||(t.classList.remove("is-active"),"user-modal"===t.id&&(d.innerHTML="",u.textContent="Usuario"))})};t.addEventListener("click",function(t){if(t.target.id.startsWith("user-")){var d=t.target.id.substr(5);fetch("/admin/user/"+d).then(function(t){return t.json()}).then(function(e){u.textContent=t.target.textContent,s(o),i(e)})}switch(t.target.id){case"bulk-btn":s(e),t.stopPropagation();break;case"single-btn":s(n),t.stopPropagation();break;case"accounts-btn":s(a),a.addEventListener("click",function(t){"create-btn"===t.target.id&&s(c)}),t.stopPropagation();break;case"export-btn":for(var l=[],m=document.querySelectorAll("#acc-bal-table tbody td"),p=0;p<m.length-1;p+=2){var b=[];b.push(m[p].textContent),b.push(m[p+1].textContent.replace(/\,/g,"")),l.push(b)}var h="data:text/csv;charset=utf-8,";l.forEach(function(t){var e=t.join(",");h+=e+"\r\n"});var C=encodeURI(h),g=document.createElement("a");g.setAttribute("href",C);var v=new Date,f=v.getDate(),y=v.getMonth()+1,E=v.getFullYear();f<10&&(f="0"+f),y<10&&(y="0"+y),v=y+"/"+f+"/"+E,g.setAttribute("download","Cuentas-"+v+".csv"),document.body.appendChild(g),g.click(),t.stopPropagation();break;case"reset-btn":s(r),t.stopPropagation();break;default:t.stopPropagation()}})});